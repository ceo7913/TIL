<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cd플레이어</title>
    <link rel="stylesheet" href="common.css">
    <script>
        /*
            1. 선택자 잡기
            2. 어떤 이벤트를 사용할지
            3. 이벤트 객체와 실행되는 객체를 어떻게 연결할 것인지?
            4. 실행되는 객체에게 class 를 어떻게 전달할 것인지?
        */
       window.onload = function(){
            const item = document.querySelectorAll('.item');

            const next = document.querySelector('.next');
            const prev = document.querySelector('.prev');

            let count = 0; // 처음 시작할 index 번호
            let itemNum = item.length; // 슬라이드는 유동적으로 값이 변할 수 있기 때문에 length 로 받아오는 것이 유용하다.
            console.log(itemNum);

            const dot = document.querySelectorAll('.dot-list li') // => dot-list 안에 li 들 호출 All 은 배열로 저장

            next.addEventListener('click', function(){
                if(count < itemNum-1){
                    // length 는 갯수로 셈을 하기 때문에 1 부터 시작 index 는 0 부터 시작하기 때문에 1의 갭이 생긴다는 것을 유의해야 한다. 
                    count++ 
                    console.log(count);
                }else{
                    count = 0;
                    console.log(count);
                }
                itemCount()

            })
            
            prev.addEventListener('click', function(){
                if(count > 0){
                    count --
                }else{
                    count = itemNum
                }
                itemCount()
            })
            /*
                dot[0].addEventListener('click', function(){
                    console.log('11');
                })

                querySelectorAll 은 배열로 받아오기 때문에 이렇게 받아오려면 
                dot[0] 부터 다 만들어줘야 한다. 그렇기 때문에
                이런경우는 for문을 사용한다.    
            */

            for(let i = 0; i < itemNum; i++){
                dot[i].addEventListener('click',function(){
                    count = i
                    itemCount()
                })
            }

            function itemCount(){
                    for(let i = 0; i < itemNum; i++){
                     if(count == i){
                         item[i].classList.add('active') // item 안에 class='active' 를 add 하는 구문
                         dot[i].classList.add('active') // dot(li) 에 class='active' 를 add 하는 구문
                     }else{
                         item[i].classList.remove('active') // item 안에 class='active' 를 remove 하는 구문
                         dot[i].classList.remove('active') // dot(li) 에 class='active' 를 remove 하는 구문
                     }
                 }
            }
            /*
                count == i 조건을 onload 후 바로 성립하기 때문에 첫번째 요소에 active 를 주지 않아도 
                첫번째 요소에 자동으로 active 가 추가 된다.            
            */
            itemCount()
       }

    </script>

    

</head>
<body>

    <div class="container">
        <div class="item">
            <div class="disk">
                <div class="disk-inner"></div>
            </div>
            <a href="https://www.youtube.com/watch?v=nM0xDI5R50E" target="_blank" class="cover">
                <img src="image/iu_0.jpg" alt="커버이미지">
            </a>
        </div>

        <div class="item">
            <div class="disk">
                <div class="disk-inner"></div>
            </div>
            <a href="https://www.youtube.com/watch?v=nM0xDI5R50E" target="_blank" class="cover">
                <img src="image/iu_1.jpg" alt="커버이미지">
            </a>
        </div>

        <div class="item">
            <div class="disk">
                <div class="disk-inner"></div>
            </div>
            <a href="https://www.youtube.com/watch?v=nM0xDI5R50E" target="_blank" class="cover">
                <img src="image/iu_2.jpg" alt="커버이미지">
            </a>
        </div>

        <div class="item">
            <div class="disk">
                <div class="disk-inner"></div>
            </div>
            <a href="https://www.youtube.com/watch?v=nM0xDI5R50E" target="_blank" class="cover">
                <img src="image/iu_3.jpg" alt="커버이미지">
            </a>
        </div>
    </div>

    <div class="btn-container">
        <button class="prev">PREV</button>
        <ul class="dot-list">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <button class="next">NEXT</button>
    </div>
    
</body>
</html>