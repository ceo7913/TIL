<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ballMoving1</title>

  <style>
  
  body{
			font-size:9pt;		
		}

    #wrap{
      width:600px; height:400px; position:absolute; left:50%; margin-left:-300px; top:200px; 
    }		
		
		#panel{
			width:600px;
			height:300px;
			border:1px solid #999;
			position:relative;
      margin-bottom:30px; 
		}
		
		#bar{
			position:absolute;
			left:50px;
			top:190px;
			width:500px;
			height:20px;
			z-index:10;
			
			border-top:dotted 1px #999;
		}
		
		#ball{
			position:absolute;
			left:50px;
			top:105px;
			width:80px;
			height:80px;
			
		}
		
		#nav{
			text-align:center;
			width:600px;
		}
  
  
  </style>

  <script>
	/*
	setInterval로 공 이동시키기

	1. 시작 버튼을 누르면 공이 현재 위치에서 움직이기 시작
	2. 공이 bar의 길이안에서만 왕복운동을 할 수 있도록 제어

	3. 정지 버튼을 누르면 공이 멈춤
	4. 다시 시작버튼을 누르면 현재 위치에서 재 시작
	*/
	
	window.onload = function(){
		const ball = document.querySelector('#ball');
		const bar = document.querySelector('#bar');
		const startBtn = document.querySelector('#start_btn');
		const stopBtn = document.querySelector('#stop_btn');

		let startX = ball.offsetLeft; // 공이 처음 시작할 위치 
		let endX = bar.offsetWidth // offsetWidth = width 의 값을 반환하는 메서드
		console.log(endX);
		let currentX = startX; // 공이 이동할 위치값을 담을 변수 (계속 변할 위치 값)
		let stepX = 3; // 공이 한번에 움직이는 값 (px)
		let timer; // setInterval 담을 변수
		console.log(startX);

		let isPlay = true

		startBtn.addEventListener('click', function(){
			// clearInterval(timer);
			// timer = setInterval(ballMoving, 1);
			if(isPlay){	
				timer = setInterval(ballMoving, 20);
				// isPlay 가 false 라도 별도으 값을 넣지않으면 기본값은 true 를 반환한다.
				isPlay = false; // 중복실행 방지 clearInterval 과 같은 효과
			}
		})
		stopBtn.addEventListener('click', function(){
			// clearInterval(timer);
			if(!isPlay){
				clearInterval(timer)
				isPlay = true;
			}
		})
		function ballMoving(){
			currentX += stepX
			ball.style.left = currentX + 'px'; 

			if(currentX >= endX){
				stepX = -3;
			}else if(currentX <= startX){
				stepX = 3;
			}
		}
	}
  </script>

</head>
<body>
  
  <div id="wrap"> 	
		<div id="panel">
			<div id="bar"> </div>
			<div id="ball">
				<img src="images/ball.png">
			</div>
		</div>
		<div id="nav">
			<button id="start_btn">시작</button>
			<button id="stop_btn">멈춤</button>
		</div>
	</div>




</body>
</html>